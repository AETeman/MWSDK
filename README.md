# MWSDK 2017-08 for TWELITE RED
                               2017/8/9 モノワイヤレス株式会社

本 SDK は、モノワイヤレス株式会社が販売する TWELITE RED 向けのアプリケーション
開発に用います。
※TWELITE BLUE (TWE-001 Lite) での開発は別に配布する SDK を利用してください。

[インストール]
アーカイブファイルを C: ドライブのトップディレクトリに展開します。
以下のように展開されます。

  C:\MWSDK\
          \c                C:\ にコピーしておく(後述)
          \ChipLib          半導体サポートライブラリ
          \IDE              Eclipse
          \MkFiles          makefile のテンプレート
          \Tools            コンパイラなど
          \TWENET           TWELITE NET ライブラリ
          \Wks_TWELITE      サンプルコード集
          \CMD.cmd          コマンドラインでビルドする場合
          \ECLIPSE.cmd      Eclipse でビルドする場合

※ 他のドライブやディレクトリに展開して動作させることも可能ですが、ディレクトリ
  構成が深くなると Eclipse が正常動作しない可能性があります。また、後述の解
  説についても上記のディレクトリ構成を前提としています。


[Eclipseの起動]
統合開発環境(IDE)の Eclipse により、ソースコードの編集やビルドを
効率的に行うことが可能です。
※ Eclipse は pleiades-e4.3-cpp-32bit-jre_20140321 を収録します。

・C:\MWSDK\ECLIPSE.cmd を実行します。
  ※ これ以外の方法で起動した場合、ビルドに必要な環境変数が設定されないため
     ビルドに失敗します。
     
・サンプルソースコードを含めたワークスペースを開きます。
  ワークスペースは C:\MWSDK\Wks_TWELITE です。

  ※ ディレクトリ構成に制約があります。Makefile のある Build ディレクトリ
     から ..\..\.. が C:\MWSDK になっていなければなりません。

・ビルドについて
  Eclipse のビルド定義で RED と記載したものを選択します。
  ※ BLUE と記載した定義はエラーになります。

[Eclipse によるソースコード解析]
コード解析については Eclipse のマニュアル等を参照してください。
（以下の記述については妥当性・正確性は保証しません。）

事前設定：
1) [プロジェクトプロパティ]>[C/C++ビルド]>[インデクサー]
  [インデクサーのビルド構成]を、[アクティブなビルド構成を使用]

2) [プロジェクトプロパティ]>[C/C++一般]>[Preprocessor Include Paths,
    Macros etc.]

　・[CDT GCC Build Output Parser] の [Compilier command pattern] を
   ba-elf-gcc に変更
  ・[CDT GCC Built-in Compiler setting] の [Command to get compiler
    specs] 中の {COMMAND} を ba-elf-gcc に修正。
  ・エントリに上記 Parser が含まれていることを確認

3) C:\TWESDK\c を C:\ にコピーする。
  C:\c\MWSDK\…

  Windows 用のコマンドラインツールのドライブ名の取り扱いに関する調整を行います。

解析の手順:
通常は、ビルドやファイルの保存を行った時にコード解析が実行されます。
うまく解析されないときは、以下の手順を試してみてください。

1) [プロジェクトプロパティ]>[C/C++一般]>[Preprocessor Include Paths,
    Macros etc.]の設定画面中で [適用] を行う。

2) プロジェクトのクリーンを実行する

3) プロジェクトのビルドを行う
  プロジェクト・エクスプローラのツリー内に [インクルード] が出現し、
  プロジェクト中でインクルードされたディレクトリが一覧されている。

4) プロジェクト・エクスプローラで、プロジェクトのトップを右クリックして
  [インデックス]>[再ビルド]

5) プロジェクト・エクスプローラで、プロジェクトのトップを右クリックして
  [C/C++ コード解析の実行]

[注意・制限事項]
・TWE-001 Lite (TWELITE BLUE) の SDK とライブラリバージョン、コンパイラ、
  が異なっています。

  BLUE用のSDKと同じライブラリバージョン(1.0.6)と同じコンパイラを用いて
  RED用のビルドは出来ません。

  反対にSDKライブラリ(1.1.1)を用いて BLUE のビルドを行うことは可能です。
  ビルド定義の make のパラメータを以下のように変更します。
  
     TWELITE=RED ---> TWELITE=BLUE

・Eclipse ではビルドが正常に実行される場合の多くのエラーが出力されます。
  これは Eclipse のコード解析などによりエラーとして出力されるものです。

  Eclipseからは make コマンドを実行します。その結果はコンソールログの
  出力されていますので、まずコンソールログにエラーが出力されていないか
  確認してください。

  Eclipseの出力する警告やエラーについては無視するようにしてください。

・本SDKの収録コードについて、Eclipse 用のコード解析の設定は行っていま
  せん。

・本SDKのソースコード中のプロジェクト定義には旧SDKでビルドするための
  定義が含まれていますが、本SDKではビルドは実行できません。旧SDKで、
  ビルドするようにしてください。

